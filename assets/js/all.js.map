{"version":3,"sources":["all.js","adopt.js"],"names":["AOS","init","disable","startEvent","initClassName","animatedClassName","useClassNames","disableMutationObserver","debounceDelay","throttleDelay","offset","delay","duration","easing","once","mirror","anchorPlacement","$","document","on","e","preventDefault","target","attr","animate","scrollTop","top","swiper","Swiper","slidesPerView","spaceBetween","loop","pagination","el","clickable","navigation","nextEl","prevEl","autoplay","disableOnInteraction","ready","click","event","css","window","addEventListener","forms","getElementsByClassName","validation","Array","prototype","filter","call","form","checkValidity","stopPropagation","classList","add","navbar","querySelector","scrollY","navbarHeight","offsetHeight","remove","BASE_URL","INDEX_URL","MODAL_URL","data","filteredData","dogColour","catColour","otherColour","allColour","shelter","modalHTML","filters","animal_kind","animal_colour","shelter_name","animal_id","displayMode","cardMode","listMode","table","displayCard","displaylList","displaylListSmall","modalApi","dataPanel","paginator","watchMore","totalNum","arrowUp","searchForm","btnSearch","animalKind","animalColour","shelterName","animalId","textNoData","CARDS_PER_PAGE","MODE","NOW_PAGE","paginatorLength","changeColourOption","colourOptions","value","forEach","i","innerHTML","renderShelterAndColour","str","renderAnimalList","rawHTML","rawHTML1","album_file","animal_sex","animal_foundplace","displayListSmall","displayList","renderDetailModal","id","fetch","then","res","json","getData","modalData","Data","animal_sterilization","animal_bodytype","calcInShelterDays","animal_createtime","animal_subid","shelter_tel","shelter_address","animal_remark","matches","dataset","alert","moveInShelterDay","todayDate","Date","replace","openDate","days","parseInt","Math","abs","renderPaginator","amount","pageArr","total","ceil","push","max","unshift","around","leftArr","rightArr","concat","childNodes","page","paginationData","length","contains","getDataByPage","startIndex","slice","getDataByClick","clickData","moreData","console","log","tagName","Number","displayModeSwitch","kind","colour","trim","output","SelectArr","options","selected","textContent","multiFilter","array","filterKeys","Object","keys","item","every","key","indexOf","result","combinedAllColour","Set","animal_status","String","includes"],"mappings":"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","file":"all.js","sourcesContent":["AOS.init({\r\n  // Global settings:\r\n  disable: false, // accepts following values: 'phone', 'tablet', 'mobile', boolean, expression or function\r\n  startEvent: 'DOMContentLoaded', // name of the event dispatched on the document, that AOS should initialize on\r\n  initClassName: 'aos-init', // class applied after initialization\r\n  animatedClassName: 'aos-animate', // class applied on animation\r\n  useClassNames: false, // if true, will add content of `data-aos` as classes on scroll\r\n  disableMutationObserver: false, // disables automatic mutations' detections (advanced)\r\n  debounceDelay: 50, // the delay on debounce used while resizing window (advanced)\r\n  throttleDelay: 99, // the delay on throttle used while scrolling the page (advanced)\r\n  // Settings that can be overridden on per-element basis, by `data-aos-*` attributes:\r\n  offset: 120, // offset (in px) from the original trigger point\r\n  delay: 0, // values from 0 to 3000, with step 50ms\r\n  duration: 800, // values from 0 to 3000, with step 50ms\r\n  easing: 'ease', // default easing for AOS animations\r\n  once: true, // whether animation should happen only once - while scrolling down\r\n  mirror: false, // whether elements should animate out while scrolling past them\r\n  anchorPlacement: 'top-bottom', // defines which position of the element regarding to window should trigger the animation\r\n});\r\n\r\n// 點擊箭頭視窗向下緩慢滑動到target\r\n$(document).on(\"click\",\".link-arrow\",function(e){\r\n  e.preventDefault();\r\n  var target = $(this).attr(\"href\");\r\n  $('html,body').animate({\r\n    scrollTop: $(target).offset().top\r\n  },500);\r\n});\r\n\r\n\r\n\r\n// Swiper\r\nvar swiper = new Swiper('.swiper-container', {\r\n  slidesPerView: 3,\r\n  spaceBetween: 30,\r\n  loop: true,\r\n  pagination: {\r\n    el: '.swiper-pagination',\r\n    clickable: true,\r\n  },\r\n  navigation: {\r\n    nextEl: '.swiper-button-next',\r\n    prevEl: '.swiper-button-prev',\r\n  },\r\n  autoplay: {\r\n    delay: 5000,\r\n    disableOnInteraction: false,\r\n  },\r\n});\r\n\r\n$(document).ready(function(){\r\n  // navbar 滾動超過導覽列高度增加陰影\r\n  // $(window).scroll(function() {\r\n  //   if ($(window).scrollTop() <= 0) {\r\n  //     $('.navbar').removeClass('shadow-sm');\r\n  //   }else {\r\n  //     $('.navbar').addClass('shadow-sm');\r\n  //   }\r\n  // })\r\n\r\n\r\n\r\n// carousel 點擊更換大圖網址(切換圖片)\r\n// function replaceUrl(e){\r\n//   const carouselActive = document.querySelector('.carousel-item-active');\r\n//   const carouselArea = document.querySelector('.carousel');\r\n//   carouselArea.addEventListener('click', replaceUrl);\r\n//   console.log(e.target.getAttribute('src'));\r\n//   let url = e.target.getAttribute('src');\r\n//   if(e.target.classList.contains('carousel-items-img')){\r\n//     console.log(\"點到我了\");\r\n//     carouselActive.setAttribute('src',url)\r\n//   }\r\n//     // 避免轉址\r\n//     e.preventDefault();\r\n// }\r\n\r\n// jq 寫法\r\n  $(\".carousel-items a\").click(function(event) {\r\n    $(\".carousel-item-active\").attr(\"src\", $(this).attr('href'));\r\n    event.preventDefault(); // 避免轉址，也可使用 return false;\r\n  });\r\n  \r\n  // modal\r\n  $('.modal').css('overflow-y', 'auto');\r\n});\r\n\r\n// Example starter JavaScript for disabling form submissions if there are invalid fields\r\n(function() {\r\n  'use strict';\r\n  window.addEventListener('load', function() {\r\n    // Fetch all the forms we want to apply custom Bootstrap validation styles to\r\n    var forms = document.getElementsByClassName('needs-validation');\r\n    // Loop over them and prevent submission\r\n    var validation = Array.prototype.filter.call(forms, function(form) {\r\n      form.addEventListener('submit', function(event) {\r\n        if (form.checkValidity() === false) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        }\r\n        form.classList.add('was-validated');\r\n      }, false);\r\n    });\r\n  }, false);\r\n})();\r\n\r\n// 滾動超過導覽列高度增加陰影\r\nvar navbar = document.querySelector('.navbar');\r\n\r\nwindow.addEventListener('scroll', function() {\r\n  const scrollTop = window.scrollY;\r\n  // const navbarTop = navbar.offsetTop;\r\n  const navbarHeight = navbar.offsetHeight;\r\n    if(scrollTop > navbarHeight)\r\n      navbar.classList.add('shadow-sm');\r\n    else\r\n      navbar.classList.remove('shadow-sm');\r\n});\r\n","// URL\r\nconst BASE_URL = \"https://data.coa.gov.tw\";\r\nconst INDEX_URL = BASE_URL + \"/api/v1/AnimalRecognition/\";\r\nconst MODAL_URL = `${INDEX_URL}?animal_id=`;\r\n\r\n// Data\r\nlet data = [];\r\nlet filteredData = [];\r\nconst dogColour = [];\r\nconst catColour = [];\r\nconst otherColour = [];\r\nlet allColour = [];\r\nconst shelter = [];\r\nlet modalHTML = \"\";\r\nlet filters = {\r\n  animal_kind: [],\r\n  animal_colour: [],\r\n  shelter_name: [],\r\n  animal_id: []\r\n}\r\n\r\n// DOM\r\nconst displayMode = document.querySelector(\"#display-mode-container\");\r\nconst cardMode = document.querySelector(\"#card-mode\");\r\nconst listMode = document.querySelector(\"#list-mode\");\r\nconst table = document.querySelector(\".table\");\r\nconst displayCard = document.querySelector(\"#displayCard\");\r\nconst displaylList = document.querySelector(\"#displaylList\");\r\nconst displaylListSmall = document.querySelector(\"#displayListSmall\");\r\nconst modalApi = document.querySelector(\".modal-api\");\r\nconst dataPanel = document.querySelector(\"#dataPanel\");\r\nconst paginator = document.querySelector(\"#paginator\");\r\nconst watchMore = document.querySelector(\".btn-watch-more\");\r\nconst pagination = document.querySelector(\".pagination\")\r\nconst totalNum = document.querySelector(\"#totalNum\");\r\nconst arrowUp = document.querySelector(\".arrow-up\");\r\nconst searchForm = document.querySelector(\"#searchForm\");\r\nconst btnSearch = document.querySelector(\"#btn-search\");\r\nconst animalKind = document.querySelector('#animalKind');\r\nconst animalColour = document.querySelector('#animalColour');\r\nconst shelterName = document.querySelector('#shelterName');\r\nconst animalId = document.querySelector(\"#animalId\");\r\nconst textNoData = document.querySelector(\".text-no-data\");\r\n\r\n// Status\r\nconst CARDS_PER_PAGE = 12; //希望一頁有幾張卡片\r\nlet MODE = \"card\"; //預設模式為卡片模式\r\nlet NOW_PAGE = 1; //存放當前頁面\r\nlet paginatorLength = 11; // 想顯示幾個頁碼\r\n\r\n// 監聽 當選擇動物種類時顯示該動物類別的毛色\r\nanimalKind.addEventListener('change', changeColourOption);\r\n\r\nfunction changeColourOption(){   \r\n  let colourOptions = `<option value=\"\" selected>- 動物毛色 -</option>`;  \r\n  if(animalKind.value === \"狗\"){    \r\n    dogColour.forEach(i => {\r\n      colourOptions += `<option value=\"${i}\">${i}</option>`;\r\n    })\r\n  }else if(animalKind.value === \"貓\"){\r\n    catColour.forEach(i => {\r\n      colourOptions += `<option value=\"${i}\">${i}</option>`;\r\n    })\r\n  }else if(animalKind.value === \"其他\"){\r\n    otherColour.forEach(i => {\r\n      colourOptions += `<option value=\"${i}\">${i}</option>`;\r\n    })\r\n  }else{\r\n    allColour.forEach(i => {\r\n      colourOptions += `<option value=\"${i}\">${i}</option>`;\r\n    })\r\n  }\r\n  animalColour.innerHTML = colourOptions;\r\n}\r\n\r\n// 載入後渲染收容所及全部毛色\r\nfunction renderShelterAndColour(){\r\n  let str = `<option value=\"\" selected>- 收容所 -</option>`;\r\n  shelter.forEach(i => {\r\n    str+= `<option value=\"${i}\">${i}</option>`\r\n  })\r\n\r\n  let colourOptions = `<option value=\"\" selected>- 動物毛色 -</option>`;\r\n  allColour.forEach(i => {\r\n    colourOptions+= `<option value=\"${i}\">${i}</option>`\r\n  })\r\n\r\n  animalColour.innerHTML = colourOptions;\r\n  shelterName.innerHTML = str;\r\n}\r\n\r\n// 上滑箭頭捲動後顯示狀態切換\r\nwindow.addEventListener('scroll', function() {\r\n  const scrollTop = window.scrollY;\r\n    if(scrollTop > 800)\r\n      arrowUp.classList.remove('d-none');\r\n    else\r\n      arrowUp.classList.add('d-none');\r\n});\r\n\r\n// 上滑箭頭點擊上滑\r\narrowUp.addEventListener('click',function(e){\r\n  e.preventDefault();\r\n  $('html,body').animate({\r\n    scrollTop: 640\r\n  },100);\r\n})\r\n\r\n// 渲染資料畫面至卡片或清單，需判斷狀態，並渲染該模式的型態\r\nfunction renderAnimalList(data){\r\n  let rawHTML = \"\";\r\n  let rawHTML1 = \"\";\r\n  //如果MODE為'card'就渲染卡片模式\r\n  if(MODE === \"card\"){\r\n    //讓使用者知道當前顯示模式\r\n    table.classList.add(\"d-none\");\r\n    displaylListSmall.classList.add(\"d-none\");\r\n    cardMode.classList.add(\"text-warning\"); \r\n    listMode.classList.remove(\"text-warning\");\r\n    data.forEach(i => {\r\n      rawHTML += `<li class=\"card-group-item col-6 col-md-4 col-lg-3 mb-10 hvr-bob\">\r\n      <div class=\"card shadow bg-gray-100\">\r\n        <h4 class=\"text-center bg-warning\">${i.animal_id}</h4>\r\n        <div class=\"custom-adopt-card-img-top\"\r\n          style=\"background: url(${i.album_file}) no-repeat 50% 50% / contain;\">\r\n        </div>\r\n        <ul class=\"card-body py-3 px-3 px-lg-4\">\r\n          <li class=\"mb-1\">\r\n            <span class=\"font-weight-bold\">類別: </span>${i.animal_kind}\r\n          </li>\r\n          <li class=\"mb-1\">\r\n            <span class=\"font-weight-bold\">毛色: </span>${i.animal_colour}\r\n          </li>\r\n          <li class=\"mb-1\">\r\n            <span class=\"font-weight-bold\">性別: </span>${i.animal_sex}\r\n          </li>\r\n          <li class=\"mb-1\">\r\n            <span class=\"font-weight-bold\">尋獲地: </span>${i.animal_foundplace}\r\n          </li>\r\n          <li class=\"mb-1\">\r\n            <span class=\"font-weight-bold\">我在: </span>\r\n            <p class=\"d-block\">${i.shelter_name}</p>\r\n          </li>\r\n        </ul>\r\n        <div class=\"bg-white d-flex mt-auto\">\r\n          <a href=\"#\" data-toggle=\"modal\" data-target=\"#adopt-modal\" data-id=${i.animal_id}\r\n            class=\"btn-detail-modal d-flex justify-content-center align-items-center card-link w-50 py-3\">\r\n            詳細資料\r\n          </a>\r\n          <a href=\"#\" class=\"btn-want-adopt card-link w-50 text-center text-secondary py-3\">\r\n            我有意願認養\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </li>`\r\n    })\r\n    displayCard.innerHTML = rawHTML;\r\n  //如果MODE為'list'就渲染清單模式\r\n  }else if(MODE === \"list\"){\r\n    displayCard.innerHTML = \"\";\r\n    table.classList.remove(\"d-none\");\r\n    displaylListSmall.classList.remove(\"d-none\");\r\n    cardMode.classList.remove(\"text-warning\"); \r\n    listMode.classList.add(\"text-warning\");\r\n    data.forEach(i =>{\r\n      rawHTML1 += `<div class=\"row d-flex justify-content-center align-items-center border-top py-2\">\r\n      <div class=\"col-3 table-adopt-img\"\r\n        style=\"background: url(${i.album_file}) no-repeat 50% 50% / contain;\">\r\n      </div>\r\n      <ul class=\"col-6\">\r\n        <li>\r\n          <span class=\"font-weight-bold\">類別: </span>${i.animal_kind}\r\n        </li>\r\n        <li>\r\n          <span class=\"font-weight-bold\">毛色: </span>${i.animal_colour}\r\n        </li>\r\n        <li>\r\n          <span class=\"font-weight-bold\">性別: </span>${i.animal_sex}\r\n        </li>\r\n        <li>\r\n          <span class=\"font-weight-bold\">我在: </span>\r\n          <p>${i.shelter_name}</p>\r\n        </li>\r\n      </ul>\r\n      <div class=\"col-3\">\r\n        <div class=\"bg-white d-flex align-items-center row\">\r\n          <a href=\"#\" data-toggle=\"modal\" data-target=\"#adopt-modal\" data-id=${i.animal_id} class=\"btn-detail-modal col-12 btn btn-warning mb-1\">看詳細</a>\r\n          <a href=\"#\" class=\"btn-want-adopt btn btn-block btn-secondary col-12\">欲認養</a>\r\n        </div>\r\n      </div>\r\n    </div>`\r\n    })\r\n    displayListSmall.innerHTML = rawHTML1;\r\n\r\n    data.forEach(i => {\r\n      rawHTML += `<tr>\r\n      <th scope=\"row d-flex flex-column justify-content-center\">\r\n        <div class=\"table-adopt-img\"\r\n          style=\"background: url(${i.album_file}) no-repeat 50% 50% / contain;\">\r\n        </div>\r\n      </th>\r\n      <td class=\"align-middle\">${i.animal_kind}</td>\r\n      <td class=\"align-middle\">${i.animal_colour}</td>\r\n      <td class=\"align-middle\">${i.animal_sex}</td>\r\n      <td class=\"align-middle\">${i.shelter_name}</td>\r\n      <td class=\"align-middle\">\r\n        <div class=\"bg-white d-flex align-items-center\">\r\n          <a href=\"#\" data-toggle=\"modal\" data-target=\"#adopt-modal\" data-id=${i.animal_id} class=\"btn-detail-modal btn btn-warning w-50 mr-2 \">\r\n            詳細資料\r\n          </a>\r\n          <a href=\"#\" class=\"btn-want-adopt btn btn-block btn-secondary w-50\">我有意願認養</a>\r\n        </div>\r\n      </td>\r\n    </tr>`\r\n    })\r\n    displayList.innerHTML = rawHTML;\r\n  }\r\n}\r\n\r\n// 渲染 modal 畫面 用 fetch 配合動物流水編號取得特定動物資料\r\nfunction renderDetailModal(id){\r\n  fetch(MODAL_URL + id)\r\n  .then(function(res){  \r\n    return res.json();    \r\n  })\r\n  .then(function(getData){    \r\n    // console.log(getData.Data);\r\n    // console.log(MODAL_URL + id);\r\n    let modalData = getData.Data;\r\n\r\n    // 將資料做中文處理\r\n    if(modalData[0].album_file === \"\"){\r\n      modalData[0].album_file = \"./assets/images/noimg.png\";\r\n    }\r\n    if(modalData[0].animal_sterilization === \"T\"){\r\n      modalData[0].animal_sterilization = \"已絕育\";\r\n    }else if(modalData[0].animal_sterilization === \"F\"){\r\n      modalData[0].animal_sterilization = \"尚未絕育\";\r\n    }\r\n\r\n    switch(modalData[0].animal_bodytype){\r\n      case \"BIG\":\r\n        modalData[0].animal_bodytype = \"大型\";\r\n        break;\r\n      case \"MEDIUM\":\r\n        modalData[0].animal_bodytype = \"中型\";\r\n        break;    \r\n      case \"SMALL\":\r\n        modalData[0].animal_bodytype = \"小型\";\r\n        break;\r\n    }\r\n\r\n    if(modalData[0].animal_sex === \"F\"){\r\n      modalData[0].animal_sex = \"母\";\r\n    }else if(modalData[0].animal_sex === \"M\"){\r\n      modalData[0].animal_sex = \"公\";\r\n    }else{\r\n      modalData[0].animal_sex = \"尚未確認\";\r\n    }    \r\n    modalData.forEach(i => {\r\n      modalHTML += `<div\r\n      class=\"d-flex flex-column justify-content-center bg-gray-100 col-12 col-md-6 mb-3 mb-md-0 shadow modal-adopt-img-container\">\r\n      <div class=\"modal-adopt-img-height\" id=\"adopt-modal-img\"\r\n        style=\"background: url(${i.album_file}) no-repeat 50% 50% / contain;\">\r\n      </div>\r\n    </div>\r\n    <div class=\"col-12 col-md-5 ml-3 d-flex flex-column justify-content-center font-s font-md-base\">\r\n      <ul>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">入所天數 : </span>${calcInShelterDays(i.animal_createtime)} 天\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">入所日期 : </span><em>${i.animal_createtime}</em>\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">尋獲地 : </span>${i.animal_foundplace}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\"></span>\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">流水編號 : </span>${i.animal_id}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">收容編號 : </span>${i.animal_subid}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">動物品種 : </span>${i.animal_kind}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">性別 : </span>${i.animal_sex}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">毛色 : </span>${i.animal_colour}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">體型 : </span>${i.animal_bodytype}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">是否絕育 : </span>${i.animal_sterilization}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\"></span>\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">所在收容所 : </span>${i.shelter_name}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">收容所電話 : </span>${i.shelter_tel}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">收容所地址 : </span>${i.shelter_address}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1 \">備註 : </span>${i.animal_remark}\r\n        </li>\r\n      </ul>\r\n    </div>`\r\n    })      \r\n    modalApi.innerHTML = modalHTML;\r\n  });\r\n}\r\n\r\n// 當點擊到\"詳細資料\"按鈕 彈出對應動物 id 的 MODAL\r\ndataPanel.addEventListener('click',function(e){\r\n  e.preventDefault();\r\n  if(e.target.matches('.btn-detail-modal')){\r\n    modalHTML = \"\";\r\n    renderDetailModal(e.target.dataset.id);\r\n  }else if(e.target.matches('.btn-want-adopt')){\r\n    alert('這個按鈕目前沒有功能喔!');\r\n  }\r\n})\r\n\r\n// 計算入所天數\r\nfunction calcInShelterDays(moveInShelterDay){\r\n  let todayDate = new Date();\r\n  let str = moveInShelterDay.replace(\"-\",\"/\")\r\n  let openDate = new Date(str);\r\n  // console.log(todayDate,openDate) \r\n  let days = parseInt(Math.abs(todayDate - openDate) / 1000 / 60 / 60 / 24);\r\n  return days;\r\n}\r\n// calcInShelterDays(\"2021/09/24\");\r\n\r\n// 渲染 pagination 頁碼\r\n// total 為總頁數，以 amount(傳入資料) / CARDS_PER_PAGE(每頁欲顯示數) 取得\r\nfunction renderPaginator(amount){\r\n  let pageArr = [];\r\n  let total = Math.ceil(amount / CARDS_PER_PAGE);\r\n  // console.log(`當前輸入總頁數為${total}，當前頁面為第${NOW_PAGE}頁，頁碼顯示${paginatorLength}頁`)\r\n  \r\n  // 總頁數小於顯示頁碼的情況下:全部顯示\r\n  if(total < paginatorLength){\r\n    for(let i=0; i<total; i++ ){\r\n      pageArr.push(i+1);      \r\n    }\r\n  }else{\r\n    // 總頁數超過 paginatorLength 的情況:當前頁面偏向頁首、頁尾或中間\r\n    const max = paginatorLength - 3; // 扣掉省略號佔的一格及前或後方固定顯示的兩個頁碼\r\n    // 當前頁面偏向頁首時\r\n    if(NOW_PAGE <= max){\r\n      // 前段顯示的頁碼\r\n      for(let i=0; i<max; i++){\r\n        pageArr.push(i+1);\r\n      }\r\n      // 補齊後面的頁碼\r\n      pageArr.push(max+1, '...', total);\r\n      // 當前頁面偏向頁尾時\r\n    }else if(NOW_PAGE >total - max){\r\n      // 後段顯示的頁碼\r\n      for(let i=0; i<max; i++){\r\n        pageArr.unshift(total-i);\r\n      }\r\n      // 補齊前面的頁碼\r\n      pageArr.unshift(1, '...', total-max);\r\n      // 當前頁面在中間時\r\n    }else{\r\n      let around = (paginatorLength - 7) / 2; // 減去前後固定顯示的兩頁、省略號以及當前頁\r\n      let leftArr = []; // 當前頁左方的頁碼\r\n      let rightArr = []; // 當前頁右方的頁碼\r\n      // 湊足中間顯示的頁碼\r\n      for(let i=1; i<=around; i++){\r\n        leftArr.unshift(NOW_PAGE - i);\r\n        rightArr.push(NOW_PAGE + i);\r\n      }\r\n      // 組合中段並補齊前後段\r\n      pageArr = leftArr.concat(NOW_PAGE, rightArr);\r\n      pageArr.push('...',total-1, total);\r\n      pageArr.unshift(1, 2, '...');\r\n    }\r\n  }\r\n  let str = \"\";\r\n  pageArr.forEach(i => {\r\n    if(i === \"...\"){\r\n      str += `<div class=\"page-item page-ellipsis\"><p>${i}</p></div>`\r\n    }else{\r\n      str += `<div class=\"page-item\" data-page=${i}><a class=\"page-link\" href=\"#\" data-page=${i}>${i}</a></div>`\r\n      }\r\n    })\r\n    paginator.innerHTML = str;\r\n    paginator.childNodes.forEach(i => {\r\n      if(i.dataset.page == NOW_PAGE){\r\n        i.classList.add('active');\r\n      }      \r\n    })\r\n}\r\n\r\n// 分頁器跳下頁、回上頁功能\r\npagination.addEventListener('click',function(e){\r\n  e.preventDefault();  \r\n  const paginationData = filteredData.length ? filteredData : data;\r\n  if(e.target.classList.contains('page-previous')){\r\n    if(NOW_PAGE === 1){\r\n      alert('已經在第一頁了');\r\n      return;\r\n    }\r\n    NOW_PAGE -= 1; \r\n    $('html,body').animate({\r\n      scrollTop: 640\r\n    },0);     \r\n  }else if(e.target.classList.contains('page-next')){\r\n    if(NOW_PAGE === Math.ceil(paginationData.length / CARDS_PER_PAGE)){\r\n      alert('沒有下一頁囉');\r\n      return;\r\n    }\r\n    NOW_PAGE += 1;\r\n    $('html,body').animate({\r\n      scrollTop: 640\r\n    },0);   \r\n  } \r\n  renderPaginator(paginationData.length);\r\n  renderAnimalList(getDataByPage(NOW_PAGE))\r\n\r\n})\r\n\r\n// 回傳當前分頁的資料陣列\r\nfunction getDataByPage(page) {\r\n  const paginationData = filteredData.length ? filteredData : data;\r\n  // page 1 => 1~12 data[0]~data[11]    data.slice(0,12)\r\n  // page 2 => 13~24 data[12]~data[23]  data.slice(12,24)\r\n  // page 3 => 25~36 data[24]~data[35]  data.slice(24,36)\r\n  const startIndex = (page - 1) * CARDS_PER_PAGE;\r\n  return paginationData.slice(startIndex, startIndex + CARDS_PER_PAGE);\r\n}\r\n\r\n// 當在小螢幕斷點點擊看更多時，渲染下一批資料\r\nwatchMore.addEventListener('click',function getDataByClick(e){\r\n  e.preventDefault();\r\n  NOW_PAGE += 1;\r\n  const clickData = filteredData.length ? filteredData : data;  \r\n  let moreData = clickData.slice(0, NOW_PAGE * CARDS_PER_PAGE);  \r\n  console.log(moreData); \r\n  renderAnimalList(moreData);\r\n  renderPaginator(data.length);\r\n})\r\n\r\n// 監聽 paginator，判斷使用者點擊第幾頁，並渲染該頁頁面\r\npaginator.addEventListener(\"click\", function(e) {\r\n  e.preventDefault();\r\n  const paginationData = filteredData.length ? filteredData : data;\r\n  // console.log(paginationData);\r\n  // console.log(e.target);\r\n  if (e.target.tagName !== \"A\") return;\r\n  NOW_PAGE = Number(e.target.dataset.page);\r\n  renderPaginator(paginationData.length);  \r\n  renderAnimalList(getDataByPage(NOW_PAGE));\r\n  // 將畫面捲動回篩選列\r\n  $('html,body').animate({\r\n    scrollTop: 640\r\n  },0);\r\n});\r\n\r\n// 圖卡及清單模式切換\r\ndisplayMode.addEventListener('click', function displayModeSwitch(e){\r\n  e.preventDefault();\r\n  if(e.target.matches(\"#card-mode\")){\r\n    MODE = \"card\";\r\n    renderAnimalList(getDataByPage(NOW_PAGE))\r\n  }else if(e.target.matches(\"#list-mode\")){\r\n    MODE = \"list\";\r\n    renderAnimalList(getDataByPage(NOW_PAGE))\r\n  }\r\n})\r\n\r\n// 搜尋功能\r\nsearchForm.addEventListener('click',function(e){\r\n  e.preventDefault();\r\n  // 取得輸入內容\r\n  const kind = animalKind.value;\r\n  const colour = animalColour.value;\r\n  const shelter = shelterName.value;\r\n  const id = animalId.value.trim();\r\n  if(e.target.classList.contains('btn-search')){\r\n    // 若點擊查詢按鈕\r\n    if(kind === \"\" && colour === \"\" && shelter === \"\" && id === \"\"){\r\n      // 沒填入任何條件時，提醒使用者必須設定條件\r\n      alert('請設定搜尋條件');\r\n      return;\r\n    }else{\r\n      output();\r\n      if(filteredData.length === 0){\r\n        alert('沒有符合條件的毛孩');\r\n        animalId.value = \"\";\r\n      }else{\r\n      // renderPaginator(filteredData.length);\r\n      // renderAnimalList(getDataByPage(NOW_PAGE));\r\n      animalId.value = \"\";\r\n      let SelectArr = $(\"select\");\r\n      for (let i = 0; i < SelectArr.length; i++) {\r\n      SelectArr[i].options[0].selected = true; \r\n      }\r\n      }\r\n    }\r\n  }else if(e.target.classList.contains('btn-search-cancel')){\r\n    // 若點擊取消按鈕\r\n    // 清空篩選陣列\r\n    filteredData = [];\r\n    NOW_PAGE = 1;\r\n    \r\n    // 重置 select，使其回到選中第一個值的狀態\r\n    let SelectArr = $(\"select\");\r\n    for (let i = 0; i < SelectArr.length; i++) {\r\n    SelectArr[i].options[0].selected = true; \r\n    }\r\n    // 重置 input，使其為空\r\n    animalId.value = \"\";\r\n    // 重置篩選條件\r\n    filters = {\r\n      animal_kind: [],\r\n      animal_colour: [],\r\n      shelter_name: [],\r\n      animal_id: []\r\n    }\r\n    // 重新渲染畫面\r\n    renderPaginator(data.length);\r\n    renderAnimalList(getDataByPage(NOW_PAGE));\r\n    totalNum.textContent = `當前檢索共有 ${data.length} 個毛孩`\r\n  }else{\r\n    return;\r\n  }\r\n})\r\n\r\n// 設定篩選條件變數 filters 中的內容\r\nsearchForm.addEventListener('change',function(){\r\n  let kind = [];  \r\n  let colour = [];\r\n  let shelter = [];\r\n  let id = [];\r\n\r\n  kind.push(animalKind.value)\r\n  colour.push(animalColour.value)\r\n  shelter.push(shelterName.value)\r\n  id.push(animalId.value.trim()) // 去除使用者可能誤打的空格\r\n  \r\n  if(kind != \"\"){\r\n    filters.animal_kind = kind\r\n  }else{\r\n    filters.animal_kind = [];\r\n  }\r\n\r\n  if(colour != \"\"){\r\n    filters.animal_colour = colour\r\n  }else{\r\n    filters.animal_colour = [];\r\n  }\r\n\r\n  if(shelter != \"\"){\r\n    filters.shelter_name = shelter\r\n  }else{\r\n    filters.shelter_name = [];\r\n  }\r\n\r\n  if(id != \"\"){\r\n    filters.animal_id = id;\r\n  }else{\r\n    filters.animal_id = [];\r\n  }\r\n})\r\n\r\n// 篩選方法，依據帶入的條件不同做多條件多數據篩選\r\nfunction multiFilter(array, filters) {\r\n  // 抓出所有篩選條件\r\n  const filterKeys = Object.keys(filters)\r\n  // 動態驗證所有符合條件\r\n  return array.filter((item) => {  \r\n  return filterKeys.every(key => {\r\n  // 忽略未選擇選項的條件\r\n  if(!filters[key].length) return true\r\n  return !!~filters[key].indexOf(item[key])\r\n      })\r\n    })\r\n  }\r\n\r\nfunction output(){\r\n  filteredData = multiFilter(data, filters);\r\n  let result = filteredData.length ? filteredData : data;\r\n  NOW_PAGE = 1;\r\n  renderPaginator(result.length);\r\n  renderAnimalList(getDataByPage(NOW_PAGE));\r\n  totalNum.textContent = `當前檢索共有 ${result.length} 個毛孩`;\r\n}\r\n\r\n// 各類別毛色資料載入後將所有毛色進行不重複值合併\r\n\r\nfunction combinedAllColour(){\r\n  allColour = [...new Set( [...dogColour, ...catColour, ...otherColour] )];\r\n}\r\n\r\n// 用 fetch 從 API 拿取資料並做部分資料處理\r\nfetch(INDEX_URL)\r\n  .then(function(res){  \r\n    return res.json();\r\n  })\r\n  .then(function(getData){    \r\n    // 只渲染開放認養的動物資料\r\n    data = getData.Data.filter(i => i.animal_status === \"OPEN\")    \r\n\r\n    data.forEach(i => {\r\n      // 將動物性別改為中文顯示\r\n      if(i.animal_sex === \"F\"){\r\n        i.animal_sex = \"母\";\r\n      }else if(i.animal_sex === \"M\"){\r\n        i.animal_sex = \"公\";\r\n      }else{\r\n        i.animal_sex = \"尚未確認\";\r\n      }\r\n      // 若圖片網址為空值以 noimg 圖片代替\r\n      if(i.album_file === \"\"){\r\n        i.album_file = \"./assets/images/noimg.png\";\r\n      }\r\n      // 將流水編號改為字串\r\n      i.animal_id = String(i.animal_id);\r\n    })\r\n\r\n    // 取得載入資料當前的所有動物毛色及所有收容所資料\r\n    data.forEach(i => {\r\n      if(shelter.includes(i.shelter_name) || i.shelter_name === \"\"){       \r\n      }else{\r\n        shelter.push(i.shelter_name);\r\n      }\r\n      if(i.animal_kind == \"狗\" && i.animal_colour != \"\"){\r\n        if(dogColour.includes(i.animal_colour) || i.animal_colour === \"\"){       \r\n      }else{\r\n        dogColour.push(i.animal_colour);\r\n      }\r\n      }else if(i.animal_kind == \"貓\" && i.animal_colour != \"\"){\r\n        if(catColour.includes(i.animal_colour)  || i.animal_colour === \"\"){       \r\n        }else{\r\n          catColour.push(i.animal_colour);\r\n        }\r\n      }else{\r\n        if(otherColour.includes(i.animal_colour)  || i.animal_colour === \"\"){        \r\n        }else{\r\n          otherColour.push(i.animal_colour);\r\n        }\r\n      }     \r\n    })\r\n    // 各類別毛色資料載入後將所有毛色進行不重複值合併\r\n    combinedAllColour();\r\n    renderShelterAndColour();\r\n    renderPaginator(data.length);\r\n    renderAnimalList(getDataByPage(NOW_PAGE));\r\n    totalNum.textContent = `當前檢索共有 ${data.length} 個毛孩`   \r\n  });"]}