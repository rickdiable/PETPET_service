{"version":3,"sources":["all.js","adopt.js"],"names":["AOS","init","disable","startEvent","initClassName","animatedClassName","useClassNames","disableMutationObserver","debounceDelay","throttleDelay","offset","delay","duration","easing","once","mirror","anchorPlacement","$","document","on","e","preventDefault","target","attr","animate","scrollTop","top","swiper","Swiper","slidesPerView","spaceBetween","loop","pagination","el","clickable","navigation","nextEl","prevEl","autoplay","disableOnInteraction","ready","click","event","css","window","addEventListener","forms","getElementsByClassName","validation","Array","prototype","filter","call","form","checkValidity","stopPropagation","classList","add","navbar","querySelector","scrollY","navbarHeight","offsetHeight","remove","BASE_URL","INDEX_URL","MODAL_URL","data","filteredData","dogColour","catColour","otherColour","shelter","modalHTML","filters","animal_kind","animal_colour","shelter_name","animal_id","displayMode","cardMode","listMode","table","displayCard","displaylList","displaylListSmall","modalApi","dataPanel","paginator","watchMore","totalNum","arrowUp","searchForm","btnSearch","animalKind","animalColour","shelterName","animalId","textNoData","CARDS_PER_PAGE","MODE","NOW_PAGE","paginatorLength","changeColourOption","colourOptions","value","forEach","i","innerHTML","renderShelterName","str","renderAnimalList","rawHTML","rawHTML1","album_file","animal_sex","animal_foundplace","displayListSmall","displayList","renderDetailModal","id","fetch","then","res","json","getData","console","log","Data","modalData","animal_sterilization","animal_bodytype","calcInShelterDays","animal_createtime","animal_subid","shelter_tel","shelter_address","animal_remark","matches","dataset","moveInShelterDay","todayDate","Date","replace","openDate","days","parseInt","Math","abs","renderPaginator","amount","pageArr","total","ceil","push","max","unshift","around","leftArr","rightArr","concat","childNodes","page","paginationData","length","contains","alert","getDataByPage","startIndex","slice","getDataByClick","clickData","moreData","tagName","Number","displayModeSwitch","kind","colour","trim","output","textContent","SelectArr","options","selected","multiFilter","array","filterKeys","Object","keys","item","every","key","indexOf","animal_status","String"],"mappings":"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","file":"all.js","sourcesContent":["AOS.init({\n  // Global settings:\n  disable: false, // accepts following values: 'phone', 'tablet', 'mobile', boolean, expression or function\n  startEvent: 'DOMContentLoaded', // name of the event dispatched on the document, that AOS should initialize on\n  initClassName: 'aos-init', // class applied after initialization\n  animatedClassName: 'aos-animate', // class applied on animation\n  useClassNames: false, // if true, will add content of `data-aos` as classes on scroll\n  disableMutationObserver: false, // disables automatic mutations' detections (advanced)\n  debounceDelay: 50, // the delay on debounce used while resizing window (advanced)\n  throttleDelay: 99, // the delay on throttle used while scrolling the page (advanced)\n  // Settings that can be overridden on per-element basis, by `data-aos-*` attributes:\n  offset: 120, // offset (in px) from the original trigger point\n  delay: 0, // values from 0 to 3000, with step 50ms\n  duration: 800, // values from 0 to 3000, with step 50ms\n  easing: 'ease', // default easing for AOS animations\n  once: true, // whether animation should happen only once - while scrolling down\n  mirror: false, // whether elements should animate out while scrolling past them\n  anchorPlacement: 'top-bottom', // defines which position of the element regarding to window should trigger the animation\n});\n\n// 點擊箭頭視窗向下緩慢滑動到target\n$(document).on(\"click\",\".link-arrow\",function(e){\n  e.preventDefault();\n  var target = $(this).attr(\"href\");\n  $('html,body').animate({\n    scrollTop: $(target).offset().top\n  },500);\n});\n\n\n\n// Swiper\nvar swiper = new Swiper('.swiper-container', {\n  slidesPerView: 3,\n  spaceBetween: 30,\n  loop: true,\n  pagination: {\n    el: '.swiper-pagination',\n    clickable: true,\n  },\n  navigation: {\n    nextEl: '.swiper-button-next',\n    prevEl: '.swiper-button-prev',\n  },\n  autoplay: {\n    delay: 5000,\n    disableOnInteraction: false,\n  },\n});\n\n$(document).ready(function(){\n  // navbar 滾動超過導覽列高度增加陰影\n  // $(window).scroll(function() {\n  //   if ($(window).scrollTop() <= 0) {\n  //     $('.navbar').removeClass('shadow-sm');\n  //   }else {\n  //     $('.navbar').addClass('shadow-sm');\n  //   }\n  // })\n\n\n\n// carousel 點擊更換大圖網址(切換圖片)\n// function replaceUrl(e){\n//   const carouselActive = document.querySelector('.carousel-item-active');\n//   const carouselArea = document.querySelector('.carousel');\n//   carouselArea.addEventListener('click', replaceUrl);\n//   console.log(e.target.getAttribute('src'));\n//   let url = e.target.getAttribute('src');\n//   if(e.target.classList.contains('carousel-items-img')){\n//     console.log(\"點到我了\");\n//     carouselActive.setAttribute('src',url)\n//   }\n//     // 避免轉址\n//     e.preventDefault();\n// }\n\n// jq 寫法\n  $(\".carousel-items a\").click(function(event) {\n    $(\".carousel-item-active\").attr(\"src\", $(this).attr('href'));\n    event.preventDefault(); // 避免轉址，也可使用 return false;\n  });\n  \n  // modal\n  $('.modal').css('overflow-y', 'auto');\n});\n\n// Example starter JavaScript for disabling form submissions if there are invalid fields\n(function() {\n  'use strict';\n  window.addEventListener('load', function() {\n    // Fetch all the forms we want to apply custom Bootstrap validation styles to\n    var forms = document.getElementsByClassName('needs-validation');\n    // Loop over them and prevent submission\n    var validation = Array.prototype.filter.call(forms, function(form) {\n      form.addEventListener('submit', function(event) {\n        if (form.checkValidity() === false) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n        form.classList.add('was-validated');\n      }, false);\n    });\n  }, false);\n})();\n\n// 滾動超過導覽列高度增加陰影\nvar navbar = document.querySelector('.navbar');\n\nwindow.addEventListener('scroll', function() {\n  const scrollTop = window.scrollY;\n  // const navbarTop = navbar.offsetTop;\n  const navbarHeight = navbar.offsetHeight;\n    if(scrollTop > navbarHeight)\n      navbar.classList.add('shadow-sm');\n    else\n      navbar.classList.remove('shadow-sm');\n});\n","// URL\r\nconst BASE_URL = \"https://data.coa.gov.tw\";\r\nconst INDEX_URL = BASE_URL + \"/api/v1/AnimalRecognition/\";\r\nconst MODAL_URL = `${INDEX_URL}?animal_id=`;\r\n\r\n// Data\r\nlet data = [];\r\nlet filteredData = [];\r\nconst dogColour = [\"咖啡色\",\"黑黃色\",\"黑棕色\",\"黑色\",\"黑白色\",\"棕黑色\",\"白色\",\"棕色\",\"黃色\",\"灰色\",\"虎斑色\",\"花色\",\"米色\",\"黑灰色\",\"黃白色\",\"棕白色\",\"黃虎斑色\",\"虎斑白色\",\"棕灰色\",\"黑虎斑色\",\"三花色\",\"灰白色\",\"花白色\",\"咖啡白色\",\"灰黑色\",\"咖啡棕色\",\"咖啡黑色\"];\r\nconst catColour = [\"虎斑色\",\"三花色\",\"黑白色\",\"黑黃色\",\"黑色\",\"虎斑白色\",\"黃白色\",\"花色\",\"黃虎斑色\",\"黃色\",\"灰白色\",\"黑虎斑色\",\"黑棕色\",\"灰色\",\"白色\",\"灰黑色\",\"咖啡棕色\",\"米色\",\"棕灰色\",\"黑灰色\",\"咖啡黑色\",\"棕黑色\",\"咖啡色\",\"花白色\",\"棕色\",\"棕白色\"];\r\nconst otherColour = [\"白色\",\"黑色\",\"花色\"]\r\nconst shelter = [\"新北市板橋區公立動物之家\",\"屏東縣公立犬貓中途之家\",\"臺北市動物之家\",\"臺東縣動物收容中心\",\"彰化縣流浪狗中途之家\",\"桃園市動物保護教育園區\",\"澎湖縣流浪動物收容中心\",\"新北市中和區公立動物之家\",\"基隆市寵物銀行\",\"花蓮縣流浪犬中途之家\",\"苗栗縣生態保育教育中心(動物收容所)\",\"雲林縣流浪動物收容所\",\"宜蘭縣流浪動物中途之家\",\"高雄市燕巢動物保護關愛園區\",\"臺南市動物之家善化站\",\"新北市八里區公立動物之家\",\"臺南市動物之家灣裡站\",\"新竹縣公立動物收容所\",\"金門縣動物收容中心\",\"高雄市壽山動物保護教育園區\",\"新竹市動物保護教育園區\",\"南投縣公立動物收容所\",\"新北市五股區公立動物之家\",\"臺中市動物之家后里園區\",\"新北市新店區公立動物之家\",\"新北市淡水區公立動物之家\",\"新北市政府動物保護防疫處\",\"嘉義縣流浪犬中途之家\",\"新北市瑞芳區公立動物之家\",\"嘉義市動物保護教育園區\",\"臺中市動物之家南屯園區\",\"連江縣流浪犬收容中心\",\"新北市三芝區公立動物之家\"];\r\nlet modalHTML = \"\";\r\nlet filters = {\r\n  animal_kind: [],\r\n  animal_colour: [],\r\n  shelter_name: [],\r\n  animal_id: []\r\n}\r\n\r\n// DOM\r\nconst displayMode = document.querySelector(\"#display-mode-container\");\r\nconst cardMode = document.querySelector(\"#card-mode\");\r\nconst listMode = document.querySelector(\"#list-mode\");\r\nconst table = document.querySelector(\".table\");\r\nconst displayCard = document.querySelector(\"#displayCard\");\r\nconst displaylList = document.querySelector(\"#displaylList\");\r\nconst displaylListSmall = document.querySelector(\"#displayListSmall\");\r\nconst modalApi = document.querySelector(\".modal-api\");\r\nconst dataPanel = document.querySelector(\"#dataPanel\");\r\nconst paginator = document.querySelector(\"#paginator\");\r\nconst watchMore = document.querySelector(\".btn-watch-more\");\r\nconst pagination = document.querySelector(\".pagination\")\r\nconst totalNum = document.querySelector(\"#totalNum\");\r\nconst arrowUp = document.querySelector(\".arrow-up\");\r\nconst searchForm = document.querySelector(\"#searchForm\");\r\nconst btnSearch = document.querySelector(\"#btn-search\");\r\nconst animalKind = document.querySelector('#animalKind');\r\nconst animalColour = document.querySelector('#animalColour');\r\nconst shelterName = document.querySelector('#shelterName');\r\nconst animalId = document.querySelector(\"#animalId\");\r\nconst textNoData = document.querySelector(\".text-no-data\");\r\n\r\n// Status\r\nconst CARDS_PER_PAGE = 12; //希望一頁有幾張卡片\r\nlet MODE = \"card\"; //預設模式為卡片模式\r\nlet NOW_PAGE = 1; //存放當前頁面\r\nlet paginatorLength = 11; // 想顯示幾個頁碼\r\n\r\n// 監聽 當選擇動物種類時顯示該動物類別的毛色\r\nanimalKind.addEventListener('change', changeColourOption);\r\n\r\nfunction changeColourOption(){   \r\n  let colourOptions = `<option value=\"\" selected>- 動物毛色 -</option>`;  \r\n  if(animalKind.value === \"狗\"){    \r\n    dogColour.forEach(i => {\r\n      colourOptions += `<option value=\"${i}\">${i}</option>`;\r\n    })\r\n    animalColour.innerHTML = colourOptions;\r\n  }else if(animalKind.value === \"貓\"){\r\n    catColour.forEach(i => {\r\n      colourOptions += `<option value=\"${i}\">${i}</option>`;\r\n    })\r\n    animalColour.innerHTML = colourOptions;\r\n  }else{\r\n    otherColour.forEach(i => {\r\n      colourOptions += `<option value=\"${i}\">${i}</option>`;\r\n    })\r\n    animalColour.innerHTML = colourOptions;\r\n  }  \r\n}\r\n\r\n// 篩選 渲染收容所名稱\r\nfunction renderShelterName(){\r\n  let str = `<option value=\"\" selected>- 收容所 -</option>`;\r\n  shelter.forEach(i => {\r\n    str+= `<option value=\"${i}\">${i}</option>`\r\n  })\r\n  shelterName.innerHTML = str;\r\n}\r\n\r\n// 上滑箭頭捲動後顯示狀態切換\r\nwindow.addEventListener('scroll', function() {\r\n  const scrollTop = window.scrollY;\r\n    if(scrollTop > 360)\r\n      arrowUp.classList.remove('d-none');\r\n    else\r\n      arrowUp.classList.add('d-none');\r\n});\r\n\r\n// 上滑箭頭點擊上滑\r\narrowUp.addEventListener('click',function(e){\r\n  e.preventDefault();\r\n  $('html,body').animate({\r\n    scrollTop: 660\r\n  },100);\r\n})\r\n\r\n// 渲染資料畫面至卡片或清單，需判斷狀態，並渲染該模式的型態\r\nfunction renderAnimalList(data){\r\n  let rawHTML = \"\";\r\n  let rawHTML1 = \"\";\r\n  //如果MODE為'card'就渲染卡片模式\r\n  if(MODE === \"card\"){\r\n    //讓使用者知道當前顯示模式\r\n    table.classList.add(\"d-none\");\r\n    displaylListSmall.classList.add(\"d-none\");\r\n    cardMode.classList.add(\"text-warning\"); \r\n    listMode.classList.remove(\"text-warning\");\r\n    data.forEach(i => {\r\n      rawHTML += `<li class=\"card-group-item col-6 col-md-4 col-lg-3 mb-10 hvr-bob\">\r\n      <div class=\"card shadow bg-gray-100\">\r\n        <h4 class=\"text-center bg-warning\">${i.animal_id}</h4>\r\n        <div class=\"custom-adopt-card-img-top\"\r\n          style=\"background: url(${i.album_file}) no-repeat 50% 50% / contain;\">\r\n        </div>\r\n        <ul class=\"card-body py-3 px-3 px-lg-4\">\r\n          <li class=\"mb-1\">\r\n            <span class=\"font-weight-bold\">類別: </span>${i.animal_kind}\r\n          </li>\r\n          <li class=\"mb-1\">\r\n            <span class=\"font-weight-bold\">毛色: </span>${i.animal_colour}\r\n          </li>\r\n          <li class=\"mb-1\">\r\n            <span class=\"font-weight-bold\">性別: </span>${i.animal_sex}\r\n          </li>\r\n          <li class=\"mb-1\">\r\n            <span class=\"font-weight-bold\">尋獲地: </span>${i.animal_foundplace}\r\n          </li>\r\n          <li class=\"mb-1\">\r\n            <span class=\"font-weight-bold\">我在: </span>\r\n            <p class=\"d-block\">${i.shelter_name}</p>\r\n          </li>\r\n        </ul>\r\n        <div class=\"bg-white d-flex mt-auto\">\r\n          <a href=\"#\" data-toggle=\"modal\" data-target=\"#adopt-modal\" data-id=${i.animal_id}\r\n            class=\"btn-detail-modal d-flex justify-content-center align-items-center card-link w-50 py-3\">\r\n            詳細資料\r\n          </a>\r\n          <a href=\"#\" class=\"card-link w-50 text-center text-secondary py-3\">\r\n            我有意願認養\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </li>`\r\n    })\r\n    displayCard.innerHTML = rawHTML;\r\n  //如果MODE為'list'就渲染清單模式\r\n  }else if(MODE === \"list\"){\r\n    displayCard.innerHTML = \"\";\r\n    table.classList.remove(\"d-none\");\r\n    displaylListSmall.classList.remove(\"d-none\");\r\n    cardMode.classList.remove(\"text-warning\"); \r\n    listMode.classList.add(\"text-warning\");\r\n    data.forEach(i =>{\r\n      rawHTML1 += `<div class=\"row d-flex justify-content-center align-items-center border-top py-2\">\r\n      <div class=\"col-3 table-adopt-img\"\r\n        style=\"background: url(${i.album_file}) no-repeat 50% 50% / contain;\">\r\n      </div>\r\n      <ul class=\"col-6\">\r\n        <li>\r\n          <span class=\"font-weight-bold\">類別: </span>${i.animal_kind}\r\n        </li>\r\n        <li>\r\n          <span class=\"font-weight-bold\">毛色: </span>${i.animal_colour}\r\n        </li>\r\n        <li>\r\n          <span class=\"font-weight-bold\">性別: </span>${i.animal_sex}\r\n        </li>\r\n        <li>\r\n          <span class=\"font-weight-bold\">我在: </span>\r\n          <p>${i.shelter_name}</p>\r\n        </li>\r\n      </ul>\r\n      <div class=\"col-3\">\r\n        <div class=\"bg-white d-flex align-items-center row\">\r\n          <a href=\"#\" data-toggle=\"modal\" data-target=\"#adopt-modal\" data-id=${i.animal_id} class=\"btn-detail-modal col-12 btn btn-warning mb-1\">看詳細</a>\r\n          <a href=\"#\" class=\"btn btn-block btn-secondary col-12\">欲認養</a>\r\n        </div>\r\n      </div>\r\n    </div>`\r\n    })\r\n    displayListSmall.innerHTML = rawHTML1;\r\n\r\n    data.forEach(i => {\r\n      rawHTML += `<tr>\r\n      <th scope=\"row d-flex flex-column justify-content-center\">\r\n        <div class=\"table-adopt-img\"\r\n          style=\"background: url(${i.album_file}) no-repeat 50% 50% / contain;\">\r\n        </div>\r\n      </th>\r\n      <td class=\"align-middle\">${i.animal_kind}</td>\r\n      <td class=\"align-middle\">${i.animal_colour}</td>\r\n      <td class=\"align-middle\">${i.animal_sex}</td>\r\n      <td class=\"align-middle\">${i.shelter_name}</td>\r\n      <td class=\"align-middle\">\r\n        <div class=\"bg-white d-flex align-items-center\">\r\n          <a href=\"#\" data-toggle=\"modal\" data-target=\"#adopt-modal\" data-id=${i.animal_id} class=\"btn-detail-modal btn btn-warning w-50 mr-2 \">\r\n            詳細資料\r\n          </a>\r\n          <a href=\"#\" class=\" btn btn-block btn-secondary w-50\">我有意願認養</a>\r\n        </div>\r\n      </td>\r\n    </tr>`\r\n    })\r\n    displayList.innerHTML = rawHTML;\r\n  }\r\n}\r\n\r\n// 渲染 modal 畫面 用 fetch 配合動物流水編號取得特定動物資料\r\nfunction renderDetailModal(id){\r\n  fetch(MODAL_URL + id)\r\n  .then(function(res){  \r\n    return res.json();    \r\n  })\r\n  .then(function(getData){\r\n    \r\n    console.log(getData.Data);\r\n    console.log(MODAL_URL + id);\r\n    let modalData = getData.Data;\r\n\r\n    // 將資料做中文處理\r\n    if(modalData[0].album_file === \"\"){\r\n      modalData[0].album_file = \"./assets/images/noimg.png\";\r\n    }\r\n    if(modalData[0].animal_sterilization === \"T\"){\r\n      modalData[0].animal_sterilization = \"已絕育\";\r\n    }else if(modalData[0].animal_sterilization === \"F\"){\r\n      modalData[0].animal_sterilization = \"尚未絕育\";\r\n    }\r\n\r\n    switch(modalData[0].animal_bodytype){\r\n      case \"BIG\":\r\n        modalData[0].animal_bodytype = \"大型\";\r\n        break;\r\n      case \"MEDIUM\":\r\n        modalData[0].animal_bodytype = \"中型\";\r\n        break;    \r\n      case \"SMALL\":\r\n        modalData[0].animal_bodytype = \"小型\";\r\n        break;\r\n    }\r\n\r\n    if(modalData[0].animal_sex === \"F\"){\r\n      modalData[0].animal_sex = \"母\";\r\n    }else if(modalData[0].animal_sex === \"M\"){\r\n      modalData[0].animal_sex = \"公\";\r\n    }else{\r\n      modalData[0].animal_sex = \"尚未確認\";\r\n    }    \r\n    modalData.forEach(i => {\r\n      modalHTML += `<div\r\n      class=\"d-flex flex-column justify-content-center bg-gray-100 col-12 col-md-6 mb-3 mb-md-0 shadow modal-adopt-img-container\">\r\n      <div class=\"modal-adopt-img-height\" id=\"adopt-modal-img\"\r\n        style=\"background: url(${i.album_file}) no-repeat 50% 50% / contain;\">\r\n      </div>\r\n    </div>\r\n    <div class=\"col-12 col-md-5 ml-3 d-flex flex-column justify-content-center font-s font-md-base\">\r\n      <ul>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">入所天數 : </span>${calcInShelterDays(i.animal_createtime)} 天\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">入所日期 : </span><em>${i.animal_createtime}</em>\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">尋獲地 : </span>${i.animal_foundplace}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\"></span>\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">流水編號 : </span>${i.animal_id}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">收容編號 : </span>${i.animal_subid}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">動物品種 : </span>${i.animal_kind}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">性別 : </span>${i.animal_sex}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">毛色 : </span>${i.animal_colour}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">體型 : </span>${i.animal_bodytype}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">是否絕育 : </span>${i.animal_sterilization}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\"></span>\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">所在收容所 : </span>${i.shelter_name}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">收容所電話 : </span>${i.shelter_tel}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1\">收容所地址 : </span>${i.shelter_address}\r\n        </li>\r\n        <li class=\"mb-1\">\r\n          <span class=\"font-weight-bold mr-1 \">備註 : </span>${i.animal_remark}\r\n        </li>\r\n      </ul>\r\n    </div>`\r\n    })      \r\n    modalApi.innerHTML = modalHTML;\r\n  });\r\n}\r\n\r\n// 當點擊到\"詳細資料\"按鈕 彈出對應動物 id 的 MODAL\r\ndataPanel.addEventListener('click',function(e){\r\n  e.preventDefault();\r\n  if(e.target.matches('.btn-detail-modal')){\r\n    modalHTML = \"\";\r\n    renderDetailModal(e.target.dataset.id);\r\n  }else{\r\n    console.log(e.target);\r\n  }\r\n})\r\n\r\n// 計算入所天數\r\nfunction calcInShelterDays(moveInShelterDay){\r\n  let todayDate = new Date();\r\n  let str = moveInShelterDay.replace(\"-\",\"/\")\r\n  let openDate = new Date(str);\r\n  console.log(todayDate,openDate) \r\n  let days = parseInt(Math.abs(todayDate - openDate) / 1000 / 60 / 60 / 24);\r\n  return days;\r\n}\r\n// calcInShelterDays(\"2021/09/24\");\r\n\r\n// 渲染 pagination 頁碼\r\n// total 為總頁數，以 amount(傳入資料) / CARDS_PER_PAGE(每頁欲顯示數) 取得\r\nfunction renderPaginator(amount){\r\n  let pageArr = [];\r\n  let total = Math.ceil(amount / CARDS_PER_PAGE);\r\n  console.log(`當前輸入總頁數為${total}，當前頁面為第${NOW_PAGE}頁，頁碼顯示${paginatorLength}頁`)\r\n  \r\n  // 總頁數小於顯示頁碼的情況下:全部顯示\r\n  if(total < paginatorLength){\r\n    for(let i=0; i<total; i++ ){\r\n      pageArr.push(i+1);      \r\n    }\r\n  }else{\r\n    // 總頁數超過 paginatorLength 的情況:當前頁面偏向頁首、頁尾或中間\r\n    const max = paginatorLength - 3; // 扣掉省略號佔的一格及前或後方固定顯示的兩個頁碼\r\n    // 當前頁面偏向頁首時\r\n    if(NOW_PAGE <= max){\r\n      // 前段顯示的頁碼\r\n      for(let i=0; i<max; i++){\r\n        pageArr.push(i+1);\r\n      }\r\n      // 補齊後面的頁碼\r\n      pageArr.push(max+1, '...', total);\r\n      // 當前頁面偏向頁尾時\r\n    }else if(NOW_PAGE >total - max){\r\n      // 後段顯示的頁碼\r\n      for(let i=0; i<max; i++){\r\n        pageArr.unshift(total-i);\r\n      }\r\n      // 補齊前面的頁碼\r\n      pageArr.unshift(1, '...', total-max);\r\n      // 當前頁面在中間時\r\n    }else{\r\n      let around = (paginatorLength - 7) / 2; // 減去前後固定顯示的兩頁、省略號以及當前頁\r\n      let leftArr = []; // 當前頁左方的頁碼\r\n      let rightArr = []; // 當前頁右方的頁碼\r\n      // 湊足中間顯示的頁碼\r\n      for(let i=1; i<=around; i++){\r\n        leftArr.unshift(NOW_PAGE - i);\r\n        rightArr.push(NOW_PAGE + i);\r\n      }\r\n      // 組合中段並補齊前後段\r\n      pageArr = leftArr.concat(NOW_PAGE, rightArr);\r\n      pageArr.push('...',total-1, total);\r\n      pageArr.unshift(1, 2, '...');\r\n    }\r\n  }\r\n  let str = \"\";\r\n  pageArr.forEach(i => {\r\n    if(i === \"...\"){\r\n      str += `<div class=\"page-item page-ellipsis\"><p>${i}</p></div>`\r\n    }else{\r\n      str += `<div class=\"page-item\" data-page=${i}><a class=\"page-link\" href=\"#\" data-page=${i}>${i}</a></div>`\r\n      }\r\n    })\r\n    paginator.innerHTML = str;\r\n    paginator.childNodes.forEach(i => {\r\n      if(i.dataset.page == NOW_PAGE){\r\n        i.classList.add('active');\r\n      }      \r\n    })\r\n}\r\n\r\n// 分頁器跳下頁、回上頁功能\r\npagination.addEventListener('click',function(e){\r\n  e.preventDefault();  \r\n  const paginationData = filteredData.length ? filteredData : data;\r\n  // 不是在第一或最後一頁點擊時時捲動到上方篩選列\r\n  if(NOW_PAGE === 1 || NOW_PAGE === Math.ceil(paginationData.length / CARDS_PER_PAGE)){\r\n  }else{\r\n    $('html,body').animate({\r\n      scrollTop: 660\r\n    },0);\r\n  }\r\n\r\n  if(e.target.classList.contains('page-previous')){\r\n    if(NOW_PAGE === 1){\r\n      console.log(NOW_PAGE);\r\n      alert('已經在第一頁了');\r\n      return;\r\n    }\r\n    NOW_PAGE -= 1;    \r\n  }else if(e.target.classList.contains('page-next')){\r\n    if(NOW_PAGE === Math.ceil(paginationData.length / CARDS_PER_PAGE)){\r\n      alert('沒有下一頁囉');\r\n      return;\r\n    }\r\n    NOW_PAGE += 1;  \r\n  } \r\n  renderPaginator(paginationData.length);\r\n  renderAnimalList(getDataByPage(NOW_PAGE))  \r\n})\r\n\r\n// 回傳當前分頁的資料陣列\r\nfunction getDataByPage(page) {\r\n  const paginationData = filteredData.length ? filteredData : data;\r\n  // page 1 => 1~12 data[0]~data[11]    data.slice(0,12)\r\n  // page 2 => 13~24 data[12]~data[23]  data.slice(12,24)\r\n  // page 3 => 25~36 data[24]~data[35]  data.slice(24,36)\r\n  const startIndex = (page - 1) * CARDS_PER_PAGE;\r\n  return paginationData.slice(startIndex, startIndex + CARDS_PER_PAGE);\r\n}\r\n\r\n// 當在小螢幕斷點點擊看更多時，渲染下一批資料\r\nwatchMore.addEventListener('click',function getDataByClick(e){\r\n  e.preventDefault();\r\n  NOW_PAGE += 1;\r\n  const clickData = filteredData.length ? filteredData : data;  \r\n  let moreData = clickData.slice(0, NOW_PAGE * CARDS_PER_PAGE);  \r\n  console.log(moreData); \r\n  renderAnimalList(moreData);\r\n  renderPaginator(data.length);\r\n})\r\n\r\n// 監聽 paginator，判斷使用者點擊第幾頁，並渲染該頁頁面\r\npaginator.addEventListener(\"click\", function(e) {\r\n  e.preventDefault();\r\n  const paginationData = filteredData.length ? filteredData : data;\r\n  // console.log(paginationData);\r\n  console.log(e.target);\r\n  if (e.target.tagName !== \"A\") return;\r\n  NOW_PAGE = Number(e.target.dataset.page);\r\n  renderPaginator(paginationData.length);  \r\n  renderAnimalList(getDataByPage(NOW_PAGE));\r\n  // 將畫面捲動回篩選列\r\n  $('html,body').animate({\r\n    scrollTop: 660\r\n  },0);\r\n});\r\n\r\n// 圖卡及清單模式切換\r\ndisplayMode.addEventListener('click', function displayModeSwitch(e){\r\n  e.preventDefault();\r\n  if(e.target.matches(\"#card-mode\")){\r\n    MODE = \"card\";\r\n    renderAnimalList(getDataByPage(NOW_PAGE))\r\n  }else if(e.target.matches(\"#list-mode\")){\r\n    MODE = \"list\";\r\n    renderAnimalList(getDataByPage(NOW_PAGE))\r\n  }\r\n})\r\n\r\n// 搜尋功能\r\nsearchForm.addEventListener('click',function(e){\r\n  e.preventDefault();\r\n  // 取得輸入內容\r\n  const kind = animalKind.value;\r\n  const colour = animalColour.value;\r\n  const shelter = shelterName.value;\r\n  const id = animalId.value.trim();\r\n  if(e.target.classList.contains('btn-search')){\r\n    // 若點擊查詢按鈕\r\n    if(kind === \"\" && colour === \"\" && shelter === \"\" && id === \"\"){\r\n      // 沒填入任何條件時，提醒使用者必須設定條件\r\n      alert('請設定搜尋條件');\r\n      return;\r\n    }else{\r\n      console.log(filters)\r\n      output();\r\n      NOW_PAGE = 1;\r\n      if(filteredData.length === 0){\r\n        alert('沒有符合條件的毛孩');\r\n        animalId.value = \"\";\r\n      }else{\r\n      renderPaginator(filteredData.length);\r\n      renderAnimalList(getDataByPage(NOW_PAGE));\r\n      animalId.value = \"\";\r\n      totalNum.textContent = `當前檢索共有 ${filteredData.length} 個毛孩`;\r\n      }\r\n    }\r\n  }else if(e.target.classList.contains('btn-search-cancel')){\r\n    // 若點擊取消按鈕\r\n    // 清空篩選陣列\r\n    filteredData = [];\r\n    NOW_PAGE = 1;\r\n    \r\n    // 重置 select，使其回到選中第一個值的狀態\r\n    let SelectArr = $(\"select\");\r\n    for (let i = 0; i < SelectArr.length; i++) {\r\n    SelectArr[i].options[0].selected = true; \r\n    }\r\n    // 重置 input，使其為空\r\n    animalId.value = \"\";\r\n    // 重置篩選條件\r\n    filters = {\r\n      animal_kind: [],\r\n      animal_colour: [],\r\n      shelter_name: [],\r\n      animal_id: []\r\n    }\r\n    // 重新渲染畫面\r\n    renderPaginator(data.length);\r\n    renderAnimalList(getDataByPage(NOW_PAGE));\r\n    totalNum.textContent = `當前檢索共有 ${data.length} 個毛孩`\r\n  }else{\r\n    return;\r\n  }\r\n})\r\n\r\n// 設定篩選條件變數 filters 中的內容\r\nsearchForm.addEventListener('change',function(){\r\n  let kind = [];  \r\n  let colour = [];\r\n  let shelter = [];\r\n  let id = [];\r\n\r\n  kind.push(animalKind.value)\r\n  colour.push(animalColour.value)\r\n  shelter.push(shelterName.value)\r\n  id.push(animalId.value.trim()) // 去除使用者可能誤打的空格\r\n  \r\n  if(kind != \"\"){\r\n    filters.animal_kind = kind\r\n  }else{\r\n    filters.animal_kind = [];\r\n  }\r\n\r\n  if(colour != \"\"){\r\n    filters.animal_colour = colour\r\n  }else{\r\n    filters.animal_colour = [];\r\n  }\r\n\r\n  if(shelter != \"\"){\r\n    filters.shelter_name = shelter\r\n  }else{\r\n    filters.shelter_name = [];\r\n  }\r\n\r\n  if(id != \"\"){\r\n    filters.animal_id = id;\r\n  }else{\r\n    filters.animal_id = [];\r\n  }\r\n})\r\n\r\n// 篩選方法，依據帶入的條件不同做多條件多數據篩選\r\nfunction multiFilter(array, filters) {\r\n  // 抓出所有篩選條件\r\n  const filterKeys = Object.keys(filters)\r\n  // 動態驗證所有符合條件\r\n  return array.filter((item) => {  \r\n  return filterKeys.every(key => {\r\n  // 忽略未選擇選項的條件\r\n  if(!filters[key].length) return true\r\n  return !!~filters[key].indexOf(item[key])\r\n      })\r\n    })\r\n  }\r\n\r\nfunction output(){\r\n  filteredData = multiFilter(data, filters);\r\n  console.log(filteredData);\r\n}\r\n\r\n\r\n\r\n\r\n// 用 fetch 從 API 拿取資料並做部分資料處理\r\nfetch(INDEX_URL)\r\n  .then(function(res){  \r\n    return res.json();\r\n  })\r\n  .then(function(getData){\r\n    console.log(getData.Data[0]);\r\n    renderShelterName();\r\n    // 只渲染開放認養的動物資料\r\n    data = getData.Data.filter(i => i.animal_status === \"OPEN\")    \r\n\r\n    data.forEach(i => {\r\n      // 將動物性別改為中文顯示\r\n      if(i.animal_sex === \"F\"){\r\n        i.animal_sex = \"母\";\r\n      }else if(i.animal_sex === \"M\"){\r\n        i.animal_sex = \"公\";\r\n      }else{\r\n        i.animal_sex = \"尚未確認\";\r\n      }\r\n      // 若圖片網址為空值以 noimg 圖片代替\r\n      if(i.album_file === \"\"){\r\n        i.album_file = \"./assets/images/noimg.png\";\r\n      }\r\n      // 將流水編號改為字串\r\n      i.animal_id = String(i.animal_id);\r\n    })\r\n    console.log(data);\r\n    renderPaginator(data.length);\r\n    renderAnimalList(getDataByPage(NOW_PAGE));\r\n    totalNum.textContent = `當前檢索共有 ${data.length} 個毛孩`   \r\n  });"]}